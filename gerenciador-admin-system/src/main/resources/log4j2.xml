<?xml version="1.0" encoding="UTF-8"?>
<configuration status="WARN">

	<!--Definição dos appenders (saída de log) -->
	<appenders>
		<!--Console -->
		<Console name="Console" target="SYSTEM_OUT">
			<PatternLayout
				pattern="[%d{HH:mm:ss}] [%t] %-5level %logger{36} - %msg%n" />
		</Console>
		<!--RollingFile: rotacao por dia + tamanho -->
		<RollingFile name="RollingFileLogger"
			fileName="logs/app.log" filePattern="logs/app-%d{yyyy-MM-dd}-%i.log">
			<PatternLayout
				pattern="[%d{yyyy-MM-dd HH:mm:ss}] %-5level %logger{36} - %msg%n" />
			<Policies>
				<!--Cria novo arquivo a cada dia -->
				<TimeBasedTriggeringPolicy interval="1" />
				<!--cria novo arquivo quando passar de 10MB -->
				<SizeBasedTriggeringPolicy size="10 MB" />
			</Policies>
			<!--Mantém no máximo 30 arquivos antigos -->
			<DefaultRolloverStrategy max="30" />
		</RollingFile>

		<!--RollingFile: arquivo excluisivo para erros -->
		<RollingFile name="ErrorFileLogger"
			fileName="logs/error.log"
			filePattern="logs/error-%d{yyyy-MM-dd}-%i.log">
			<PatternLayout
				pattern="[%d{yyyy-MM-dd HH:mm:ss}] %-5level %logger{36} - %msg%n" />
			<Policies>
				<!--Cria novo arquivo a cada dia -->
				<TimeBasedTriggeringPolicy interval="1" />
				<!--cria novo arquivo quando passar de 5MB -->
				<SizeBasedTriggeringPolicy size="5 MB" />
			</Policies>
			<!--Mantém no máximo 15 arquivos antigos -->
			<DefaultRolloverStrategy max="15" />
			<!--Só Grava mensagens de nivel Error -->
			<Filters>
				<ThresholdFilter level="ERROR" onMatch="ACCEPT"
					onMismatch="DENY" />
			</Filters>
		</RollingFile>

	</appenders>

	<!--Definição de loggers -->
	<Loggers>
		<!--Logger especifico para HikariCP -->
		<Logger name="com.zaxxer.hikari" level="INFO"
			additivity="false">
			<appenderRef ref="Console" />
			<appenderRef ref="RollingFileLogger" />
			<appenderRef ref="ErrorFileLogger" />
		</Logger>

		<!--Logger da apliçação -->
		<Logger name="com.br.yat.gerenciador" level="DEBUG"
			additivity="false">
			<appenderRef ref="Console" />
			<appenderRef ref="RollingFileLogger" />
			<appenderRef ref="ErrorFileLogger" />
		</Logger>
		<!--Root logger(padrão para tudo que nao foi especificado) -->
		<Root level="WARN">
			<appenderRef ref="Console" />
			<appenderRef ref="RollingFileLogger" />
			<appenderRef ref="ErrorFileLogger" />
		</Root>
	</Loggers>
</configuration>